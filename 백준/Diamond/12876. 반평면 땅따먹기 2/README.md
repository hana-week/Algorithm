# [Diamond III] 반평면 땅따먹기 2 - 12876 

[문제 링크](https://www.acmicpc.net/problem/12876) 

### 성능 요약

메모리: 69160 KB, 시간: 384 ms

### 분류

볼록 껍질을 이용한 최적화, 자료 구조, 분리 집합, 분할 정복, 그래프 이론, 오프라인 동적 연결성 판정, 오프라인 쿼리, 세그먼트 트리

### 제출 일자

2024년 7월 20일 22:46:57

### 문제 설명

<p>원소가 하나도 없는 공집합 상태의 정수 쌍들(pairs of integers) 집합이 있을 때, n개의 연산이 주어진다. 각 연산은 세 가지 유형 중 하나이다.</p>

<ol>
	<li>정수 쌍 (a, b)를 집합에 추가</li>
	<li>i번째 연산에서 추가했던 정수 쌍을 집합에서 제거</li>
	<li>주어지는 정수 x에 대하여 집합에 남아있는 모든 원소 (a, b) 중 ax+b의 최댓값을 출력</li>
</ol>

<p>주어진 연산을 수행하는 프로그램을 작성해보자.</p>

### 입력 

 <p>첫째 줄에 연산의 개수를 나타내는 n 이 주어집니다. (1 ≤ n ≤ 300,000)</p>

<p>둘째 줄부터 n개의 줄은 연산의 종류를 알려주는 하나의 정수 Type(1, 2, 3 중 하나)으로 시작한다.</p>

<p>Type이 1이라면, 연산 1에 해당하는 2개의 정수 a, b가 주어진다. (-10<sup>9</sup> ≤ a, b ≤ 10<sup>9</sup>)</p>

<p>Type이 2라면, 연산 2에 해당하는 1개의 정수 i(1 ≤ i ≤ n)가 주어진다. i는 해당 연산의 번호보다 작고, i번째 연산은 1번 연산이며 해당 연산으로 추가된 정수 쌍은 이전에 또 제거된 적이 없다.</p>

<p>Type이 3이라면, 연산 3에 해당하는 1개의 정수 x가 주어진다. (-10<sup>9</sup> ≤ x ≤ 10<sup>9</sup>)</p>

### 출력 

 <p>연산 3을 수행할 때마다 답을 순서대로 한 줄에 하나씩 출력한다. 만약 정수 쌍들의 집합이 공집합이라면 “EMPTY”를 출력한다. (따옴표 제외)</p>

